<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- manifest.json-->
    <link rel="manifest" href="./manifest.json">
    <!-- ホーム画面に表示されるアプリアイコン（iOS）-->
    <link rel="apple-touch-icon" href="images/icons/icon-192x192.png" sizes="192x192">
    <!-- library-->
    <script src="./js/vue.min.js"></script>
    <script src="./js/localforage.min.js"></script>
    <script src="./js/axios.min.js"></script>
    <!-- Vue.Draggable-->
    <script src="./js/sortable.min.js"></script>
    <script src="./js/vuedraggable.js"></script>
    <title>俺のToDo</title>
  </head>
  <body ontouchstart="">
    <main id="app" v-cloak>
      <section class="todo_edit">
        <ul class="tabs">
          <li v-for="(tab,key) in todo.tabs" @click="todo.selectedTab = tab.id" :class="{select : todo.selectedTab === tab.id}"><span>[{{tab.id}}] {{tab.label}}</span></li>
          <li class="edit">
            <button @click="newTab.dialog=true">Edit</button>
          </li>
        </ul>
        <hr>
        <ul class="todo">
          <draggable :list="todo.items" @start="console.log('start')" @end="console.log('end')" tag="ul" handle=".handle" v-bind="dragOptions">
            <transition-group type="transition" name="flip-list" tag="ul">
              <li class="item" v-for="(item,key) in todo.items" v-if="todo.selectedTab === item.tab_id" :key="key">
                <button @click="todo.items.splice(key,1)">×</button>
                <input type="checkbox" v-model="item.complate"><span class="label">
                  <input type="text" v-model.lazy="item.label"></span>
                <div class="handle">=</div>
              </li>
            </transition-group>
          </draggable>
          <li class="item new">
            <input type="checkbox" disabled><span class="label">
              <input type="text" v-model="newItem.label" @blur="addNewItem"></span>
          </li>
        </ul>
        <div>
          <hr>
          <button @click="saveJson">SAVE</button>
          <button @click="deleteJson">Delete</button>
        </div>
      </section>
      <section class="tabs_edit" v-show="newTab.dialog">
        <h1 class="sec_title">タブ編集</h1>
        <ul class="tabs">
          <li class="item" v-for="(tab,key) in todo.tabs">
            <button @click="$delete(todo.tabs, key)">×</button><span>[{{tab.id}}]</span><span class="label">
              <input type="text" v-model.lazy="tab.label"></span>
          </li>
          <li class="item new">
            <input type="checkbox" disabled><span class="label">
              <input type="text" v-model="newTab.label" @blur="addNewTab"></span>
          </li>
        </ul>
      </section>
      <div>ver:{{ver}}</div>
      <div>selectedTab:{{todo.selectedTab}}</div>


      <div class="col-6">
        <h3>Transition</h3>
        <draggable
          class="list-group"
          tag="ul"
          v-model="list"
          v-bind="dragOptions"
          @start="drag = true"
          @end="drag = false"
        >
          <transition-group type="transition" :name="!drag ? 'flip-list' : null">
            <li
              class="list-group-item"
              v-for="element in list"
              :key="element.order"
            >
              <i
                :class="
                  element.fixed ? 'fa fa-anchor' : 'glyphicon glyphicon-pushpin'
                "
                @click="element.fixed = !element.fixed"
                aria-hidden="true"
              ></i>
              {{ element.name }}
            </li>
          </transition-group>
        </draggable>
      </div>



    </main>
    <!--css,js-->
    <script src="./js/app.js"></script>
    <link rel="stylesheet" href="./css/app.css">
  </body>
</html>